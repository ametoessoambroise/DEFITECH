{% extends "base.html" %} {% block title %}{{ current_user.nom }} {{
current_user.prenom }} | DEFITECH{% endblock %} {% block content %}
<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 flex-grow">
  <div class="bg-white rounded-lg shadow p-6 mb-8">
    <h2 class="text-xl font-semibold text-gray-900 mb-4">
      Liste des devoirs à corriger
    </h2>
    {% if devoirs_info and devoirs_info|length > 0 %}
    <table class="min-w-full divide-y divide-gray-200 text-xs sm:text-sm">
      <thead class="bg-yellow-500">
        <tr>
          <th class="px-4 py-3 text-left text-xs font-semibold text-white uppercase tracking-wider">
            Titre
          </th>
          <th class="px-4 py-3 text-left text-xs font-semibold text-white uppercase tracking-wider">
            Filière
          </th>
          <th class="px-4 py-3 text-left text-xs font-semibold text-white uppercase tracking-wider">
            Année
          </th>
          <th class="px-4 py-3 text-left text-xs font-semibold text-white uppercase tracking-wider">
            Étudiant
          </th>
          <th class="px-4 py-3 text-left text-xs font-semibold text-white uppercase tracking-wider">
            Fichier
          </th>
        </tr>
      </thead>
      <tbody class="bg-white divide-y divide-gray-100">
        {% for info in devoirs_info %}
        <tr class="hover:bg-yellow-50 transition-all duration-200">
          <td class="px-4 py-2">{{ info.devoir.titre }}</td>
          <td class="px-4 py-2">{{ info.devoir.filiere }}</td>
          <td class="px-4 py-2">{{ info.devoir.annee }}</td>
          <td class="px-4 py-2">
            {{ info.etudiant.nom if info.etudiant else 'Inconnu' }}
          </td>
          <td class="px-4 py-2">
            {% if info.nom_fichier %}
            <a href="/static/uploads/{{ info.nom_fichier }}"
              download="{{ info.etudiant.nom if info.etudiant else 'devoir' }}_{{ info.nom_fichier }}"
              class="bg-yellow-100 text-yellow-700 hover:bg-yellow-700 hover:text-white rounded-lg p-2 hover:shadow-lg transition-all duration-300"><i
                class="fas fa-download"></i> Télécharger</a>
            {% else %}-{% endif %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% else %}
    <div class="text-center text-gray-500 py-8">
      <i class="fas fa-tasks text-4xl text-gray-300 mb-4"></i>
      <p>Aucun devoir à corriger pour le moment.</p>
    </div>
    {% endif %}
  </div>
</div>
{% endblock %}