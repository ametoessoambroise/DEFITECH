<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vérification de Document - DEFITECH</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
  </head>
  <body
    class="bg-gray-50 min-h-screen flex flex-col items-center justify-center p-4"
  >
    <div class="max-w-md w-full bg-white rounded-2xl shadow-xl overflow-hidden">
      <!-- Header -->
      <div class="bg-gradient-to-r from-blue-700 to-indigo-800 p-6 text-center">
        <div
          class="w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4 backdrop-blur-sm"
        >
          <i class="fas fa-certificate text-white text-3xl"></i>
        </div>
        <h1 class="text-2xl font-bold text-white">Document Officiel</h1>
        <p class="text-blue-100 text-sm mt-1">
          Plateforme de Vérification DEFITECH
        </p>
      </div>

      <!-- Result Content -->
      <div class="p-6">
        <div class="flex items-center justify-center mb-6">
          <div
            class="bg-green-100 text-green-700 px-4 py-2 rounded-full font-bold flex items-center shadow-sm border border-green-200"
          >
            <i class="fas fa-check-circle mr-2"></i> DOCUMENT AUTHENTIQUE
          </div>
        </div>

        <div class="space-y-4">
          <div class="py-3 border-b border-gray-100">
            <p
              class="text-xs text-gray-400 uppercase tracking-wider font-semibold"
            >
              Étudiant
            </p>
            <p class="text-lg font-bold text-gray-800">
              {{ doc.student.nom }} {{ doc.student.prenom }}
            </p>
            <!-- Note: doc.student relationship might not exist on Archive directly if tailored. 
                         Let's assume the relationships are set up or we use stored fields. 
                         If AcademicArchivedStudent has no relationship back to User, we use stored fields.
                    -->
            {% if doc.student_user %}
            <p class="text-lg font-bold text-gray-800">
              {{ doc.student_user.nom }} {{ doc.student_user.prenom }}
            </p>
            {% else %}
            <!-- Fallback if relation not loaded but we have the ID, or ideally we archived the names too? 
                             Wait, AcademicArchivedStudent only stores IDs and results. 
                             Actually, usually we archive the name too to be safe. 
                             Let's check the model definition.
                             If model doesn't have names, we fetch via user_id.
                        -->
            <p class="text-lg font-bold text-gray-800">
              ID Étudiant: {{ doc.student_user_id }}
            </p>
            <p class="text-xs text-gray-500">
              (Nom archivé non disponible directement, vérifiez l'ID)
            </p>
            {% endif %}
          </div>

          <div class="py-3 border-b border-gray-100">
            <p
              class="text-xs text-gray-400 uppercase tracking-wider font-semibold"
            >
              Année & Filière
            </p>
            <p class="text-gray-700 font-medium">
              {{ doc.filiere_nom }} - {{ doc.annee_academique }}
            </p>
          </div>

          <div class="py-3 border-b border-gray-100">
            <p
              class="text-xs text-gray-400 uppercase tracking-wider font-semibold"
            >
              Niveau
            </p>
            <p class="text-gray-700 font-medium">{{ doc.niveau }}</p>
          </div>

          <div class="py-3 border-b border-gray-100">
            <p
              class="text-xs text-gray-400 uppercase tracking-wider font-semibold"
            >
              Résultat
            </p>
            <div class="flex justify-between items-center mt-1">
              <span class="text-gray-600">Total Crédits:</span>
              <span class="font-bold text-gray-900"
                >{{ doc.credits_total_valides }} / 60</span
              >
            </div>
            <div class="flex justify-between items-center mt-1">
              <span class="text-gray-600">Décision Jury:</span>
              <span
                class="px-2 py-1 rounded text-xs font-bold {{ 'bg-green-100 text-green-700' if doc.decision_jury == 'ADMIS' else 'bg-red-100 text-red-700' }}"
              >
                {{ doc.decision_jury }}
              </span>
            </div>
          </div>

          <div class="text-center mt-6">
            <p class="text-xs text-gray-400">
              Archivé le {{ doc.date_archived.strftime('%d/%m/%Y') }}
            </p>
            <p class="text-xs text-gray-400">ID Document: #{{ doc.id }}</p>
          </div>
        </div>
      </div>

      <!-- Footer -->
      <div class="bg-gray-50 p-4 border-t border-gray-200 text-center">
        <a
          href="{{ url_for('main.index') }}"
          class="text-blue-600 hover:text-blue-800 text-sm font-semibold"
        >
          Retour à l'accueil
        </a>
      </div>
    </div>
  </body>
</html>
